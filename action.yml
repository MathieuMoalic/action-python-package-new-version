name: Python Package Version Check
description: >
  Parses pyproject.toml, queries package indexes and exports one
  environment variable per index

inputs:
  path:
    description: Path to the pyproject.toml to inspect.
    required: false
    default: pyproject.toml

  indexes:
    description: |
      Space-separated list of index host names
      (e.g. "pypi.org test.pypi.org internal.repo.local").
    required: false
    default: "pypi.org"

runs:
  using: composite
  steps:
    - name: Check package version
      shell: bash
      run: |
        python "${{ github.action_path }}/entrypoint.py" \
               "${{ inputs.path }}" \
               ${{ inputs.indexes }}

branding:
  icon: package
  color: yellow
